this is the RadioScatter module. It has been made to run independently of, or within, GEANT4. It simulates RF scattering from points in 4 space, which may be ionization deposits left by particle showers produced in geant4. it is highly customizable. the module slac_rf is g4 source code that will produce histograms of voltages received in a scattering experiment. To use it, you need to have the following things installed and working:

ROOT 6.08 or higher (https://root.cern.ch/downloading-root)
CLHEP (https://gitlab.cern.ch/CLHEP/CLHEP)
GEANT4* (https://geant4.web.cern.ch/geant4/support/download.shtml)

*technically you can use any monte-carlo program you want with RadioScatter, but this installation requires GEANT4 in order to build the module into a working simulation.

i'm gonna assume that you know how to use GEANT4 and ROOT. CLHEP is just a nice library for doing calculations with 3 and 4-vectors that i like quite well, so install that too plz. sometimes if you have put CLHEP in a strange place you need to set CLHEP_DIR to the place where you put clhep, but it will probably be found if you put it somewhere logical


************
INSTALL
************

**********************
radio scatter default installation
**********************

cd /your/favorite/source/dir  (like /usr/local or something)
git clone https://github.com/prchyr/RadioScatter.git
cd RadioScatter
./install.sh


this will install the header files and shared libraries (for root analysis) to the right places. it will put the libs inside of /usr/local/lib and the header files in /usr/local/include. It will make a build directory (inside the RadioScatter directory) called build, where the build products are placed before they are installed in the proper location.

*********************************
slightly fancier installation 
*********************************

say you want your libraries and headers installed in some other place than /usr/local, you can set the RS_INSTAL_DIR variable in your bashrc. then libraries will install to RS_INSTALL_DIR/lib and headers to RS_INSTALL_DIR/include

cd /your/favorite/source/dir
git clone https://github.com/prchyr/RadioScatter.git
export RS_INSTALL_DIR=/your/preferred/install/dir
cd RadioScatter
./install.sh 


these should work, at least on UBUNTU 16.04

*************
GEANT4 modules
*************

there are 2 different GEANT4 modules included, one for a lab based experiment and one for an in-ice experiment. the experiment one is called slac_rf, so to install it, do

cd /your/GEANT/app/dir
mkdir slac_rf_build
cd slac_rf_build
cmake /path/to/RadioScatter/slac_rf
make -b -j4

which will make a build directory somewhere you want it to live, then install the GEANT4 simulation there linked to the RadioScatter libraries, once you've installed them as above.

*****************************************************************************************
*****************************************************************************************



there is currently no documentation beyond this readme, comments in the header file, and a paper:

http://arxiv.org/abs/1710.02883

The included slac_rf module is built around one of the GEANT4 examples, and i only claim responsibility for my changes-the underlying beauty of GEANT4 is not in any way my doing!


how it works, breifly:

The RadioScatter module calculates rf scattering from a point in 4 space. this point can be anything. it is most useful to have the points be from some monte-carlo generation, like GEANT4, which is what i used to write it. you can probably fit it into any MC program with relative ease. details of the math are in the paper linked above.

how it works within GEANT4:

the Radioscatter.hh file is just a header file that needs to be included in the GEANT4 source. there should be several different ways to use it, but one way is to globally declare the RadioScatter object in the main simulation .cc file of the simulation. it is then best to pass the constructed radio scatter object to the action initialization and the run action and stepping action files of the simulation. this will allow access to different methods that are useful at different points in the sumulation lifetime. for example, the data is filled during the stepping action phase, but the ROOT histograms are cosed at the end of the run action, through a built in GEANT4 method called EndOfRunAction. 

there are also several commands available through the RSmessenger.hh/cc files which allow for manipulation of the radioscatter configuration through the GEANT4 macro files. things such as

/RS/setTxPos 5 0 3 m

and

/RS/setTxVoltage 200
/RS/setShowCWFlag 1

which can be used without the need to re-compile the GEANT4 source, making running simulations much more simple.

ok so to actually run the program,

cd /path/to/geant4/program/install/dir/  (default is RadioScatter/slac_build unless you provided an argument to install.sh)

./slac_rf -m run1.mac -f "/path/to/file/and/filename.root"

to set the root file name, (-f) which is optional. each run is stored in an entry in a tree. there are some default macros:

run1.mac:
	-this will set the tx position and the energies and such, but will run through a loop of RX positions, which are specified in the slac.cc file in RadioScatter/slac_rf/ which you can modify. if you do, you need to re-compile.

run3.mac:
	-this will set the tx position and rx position as specified in the file, and then run the beam for 10 events.

enjoy. questions can be sent to prohira attt ku dottt edu